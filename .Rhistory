head(5)
county_incarceration_data %>%
arrange(net_change_00_20) %>%
select(state, county, net_change_00_20) %>%
head(5)
plot_usmap(regions = "counties", data = county_incarceration_data, values = "net_change_00_10", color = "black") +
labs(title = "Net Change in Incarcerated Population Counts Between 2000 and 2010",
subtitle = "Pinal County in Arizona saw an increase of 11,670 incarcerated individuals over 10 years.",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Net Change", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# 2010 and 2020
plot_usmap(regions = "counties", data = county_incarceration_data, values = "net_change_10_20", color = "black") +
labs(title = "Net Change in Incarcerated Population Counts Between 2010 and 2020",
subtitle = "Kern County in California saw a decrease of 8,449 incarcerated individuals over 10 years",
caption = "U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Net Change", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# 2000 and 2020
plot_usmap(regions = "counties", data = county_incarceration_data, values = "net_change_00_20", color = "black") +
labs(title = "Net Change in Incarcerated Population Counts Between 2000 and 2020",
subtitle = "In 20 years, Pinal County in Arizona saw an increase of 8,079 incarcerated individuals and Bronx County in New York saw a decrease of 9,920.",
caption = "U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Net Change", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
plot_usmap(regions = "counties", data = county_incarceration_data, values = "net_change_00_20", color = "black") +
labs(title = "Net Change in Incarcerated Population Counts Between 2000 and 2020",
subtitle = "In 20 years, Pinal County in Arizona saw an increase of 8,079 incarcerated individuals.",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Net Change", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# 2000 and 2010
plot_usmap(regions = "counties", data = county_incarceration_data, values = "net_change_00_10", color = "black") +
labs(title = "Net Change in Incarcerated Population Counts Between 2000 and 2010",
subtitle = "Pinal County, Arizona saw an increase of 11,670 incarcerated individuals over 10 years.",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Net Change", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# 2010 and 2020
plot_usmap(regions = "counties", data = county_incarceration_data, values = "net_change_10_20", color = "black") +
labs(title = "Net Change in Incarcerated Population Counts Between 2010 and 2020",
subtitle = "Kern County, California saw a decrease of 8,449 incarcerated individuals over 10 years",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Net Change", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
View(state_incarceration_data)
View(arizona)
no_change_00_10 <- county_incarceration_data %>%
filter(net_change_00_10 == 0) %>%
select(state, county, net_change_00_10)
View(no_change_00_10)
no_change_10_20 <- county_incarceration_data %>%
filter(net_change_10_20 == 0) %>%
select(state, county, net_change_10_20)
View(no_change_10_20)
# 2000
plot_usmap(data = state_incarceration_data, values = "pct_incarcerated_00", color = "black") +
labs(title = "Percent of Total Population Incarcerated by State in 2000",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Percent Incarcerated", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# 2010
plot_usmap(data = state_incarceration_data, values = "pct_incarcerated_10", color = "black") +
labs(title = "Percent of Total Population Incarcerated by State in 2010",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Percent Incarcerated", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# 2020
plot_usmap(data = state_incarceration_data, values = "pct_incarcerated_20", color = "black") +
labs(title = "Percent of Total Population Incarcerated by State in 2020",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Percent Incarcerated", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
View(county_incarceration_data)
install.packages("tidycensus")
install.packages("rgdal", type="source")
library(tidycensus)
install.packages("tidycensus")
sf_county_incarceration_data <- st_as_sf(county_incarceration_data, coords = c("longitude", "latitude"),
crs = 4326)
mapview(sf_county_incarceration_data, zcol = "net_change_00_10")
# load ACS variables
acs_variables <- load_variables(year = 2020,
dataset = "acs5",
cache = TRUE)
library(tidyverse)
library(tidycensus)
library(dplyr)
library(sf)
library(tigris)
library(ggplot2)
library(usmap)
library(maps)
library(mapview)
library(leaflet)
library(htmlwidgets)
census_api_key("8b69f2765f65670c2183febdffce6afc73c72101", install=TRUE, overwrite=TRUE)
readRenviron("~/.Renviron")
# load ACS variables
acs_variables <- load_variables(year = 2020,
dataset = "acs5",
cache = TRUE)
# load median income estimates for Colorado, Pennsylvania, Mississippi, Louisiana, and Georgia
colorado_medincome <- get_acs(geography = "county",
variables = c(medincome = "B19013_001"),
state = "CO",
year = 2020)
louisiana_medincome <- get_acs(geography = "county",
variables = c(medincome = "B19013_001"),
state = "LA",
year = 2020)
arizona_medincome <- get_acs(geography = "county",
variables = c(medincome = "B19013_001"),
state = "AZ",
year = 2020)
# clean ACS data frames to prepare for mapping
colorado_medincome <- colorado_medincome %>%
rename(county = NAME) %>%
rename(fips = GEOID) %>%
mutate(county = (str_remove_all(county,", Colorado"))) %>%
mutate(fips = str_sub(fips, 3, 5))
louisiana_medincome <- louisiana_medincome %>%
rename(county = NAME) %>%
rename(fips = GEOID) %>%
mutate(county = (str_remove_all(county,", Louisiana"))) %>%
mutate(fips = str_sub(fips, 3, 5))
arizona_medincome <- arizona_medincome %>%
rename(county = NAME) %>%
rename(fips = GEOID) %>%
mutate(county = (str_remove_all(county,", Arizona"))) %>%
mutate(fips = str_sub(fips, 3, 5))
# median income maps
# colorado
plot_usmap("counties", include = "CO", color = "black", data = colorado_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# louisiana
plot_usmap("counties", include = "LA", color = "black", data = louisiana_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# arizona
plot_usmap("counties", include = "AZ", color = "black", data = arizona_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# load incarceration rates for Colorado, Louisiana, and Arizona
colorado_incarcerations <- county_incarceration_data %>%
filter(state == "CO") %>%
select(state, county, percent_incarcerated_20)
louisiana_incarcerations <- county_incarceration_data %>%
filter(state == "LA") %>%
select(state, county, percent_incarcerated_20)
arizona_incarcerations <- county_incarceration_data %>%
filter(state == "AZ") %>%
select(state, county, percent_incarcerated_20)
# incarceration rate maps
# colorado
plot_usmap("counties", include = "CO", color = "black", data = colorado_incarcerations, values = "percent_incarcerated_20") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# louisiana
plot_usmap("counties", include = "LA", color = "black", data = louisiana_incarcerations, values = "percent_incarcerated_20") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# arizona
plot_usmap("counties", include = "AZ", color = "black", data = arizona_incarcerations, values = "percent_incarcerated_20") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
plot_usmap("counties", include = "CO", color = "black", data = colorado_incarcerations, values = "percent_incarcerated_20") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_continuous()
View(colorado_incarcerations)
plot_usmap("counties", include = "CO", color = "black", data = colorado_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# louisiana
plot_usmap("counties", include = "LA", color = "black", data = louisiana_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# arizona
plot_usmap("counties", include = "AZ", color = "black", data = arizona_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# colorado
plot_usmap("counties", include = "CO", color = "black", data = colorado_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# louisiana
plot_usmap("counties", include = "LA", color = "black", data = louisiana_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# arizona
plot_usmap("counties", include = "AZ", color = "black", data = arizona_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# incarceration rate maps
# colorado
plot_usmap("counties", include = "CO", color = "black", data = colorado_incarcerations, values = "percent_incarcerated_20") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# louisiana
plot_usmap("counties", include = "LA", color = "black", data = louisiana_incarcerations, values = "percent_incarcerated_20") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# arizona
plot_usmap("counties", include = "AZ", color = "black", data = arizona_incarcerations, values = "percent_incarcerated_20") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
View(arizona_medincome)
plot_usmap(data = state_incarceration_data, values = "pct_incarcerated_00", color = "black") +
labs(title = "Percent of Total Population Incarcerated by State in 2000",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Percent Incarcerated", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# load ACS variables
acs_variables <- load_variables(year = 2020,
dataset = "acs5",
cache = TRUE)
# load median income estimates for Colorado, Pennsylvania, Mississippi, Louisiana, and Georgia
colorado_medincome <- get_acs(geography = "county",
variables = c(medincome = "B19013_001"),
state = "CO",
year = 2020)
louisiana_medincome <- get_acs(geography = "county",
variables = c(medincome = "B19013_001"),
state = "LA",
year = 2020)
arizona_medincome <- get_acs(geography = "county",
variables = c(medincome = "B19013_001"),
state = "AZ",
year = 2020)
# clean ACS data frames to prepare for mapping
colorado_medincome <- colorado_medincome %>%
rename(county = NAME) %>%
rename(fips = GEOID) %>%
mutate(county = (str_remove_all(county,", Colorado")))
louisiana_medincome <- louisiana_medincome %>%
rename(county = NAME) %>%
rename(fips = GEOID) %>%
mutate(county = (str_remove_all(county,", Louisiana")))
arizona_medincome <- arizona_medincome %>%
rename(county = NAME) %>%
rename(fips = GEOID) %>%
mutate(county = (str_remove_all(county,", Arizona")))
# load incarceration rates for Colorado, Louisiana, and Arizona
colorado_incarcerations <- county_incarceration_data %>%
filter(state == "CO") %>%
select(state, county, percent_incarcerated_20)
louisiana_incarcerations <- county_incarceration_data %>%
filter(state == "LA") %>%
select(state, county, percent_incarcerated_20)
arizona_incarcerations <- county_incarceration_data %>%
filter(state == "AZ") %>%
select(state, county, percent_incarcerated_20)
# median income maps
# colorado
plot_usmap("counties", include = "CO", color = "black", data = colorado_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# louisiana
plot_usmap("counties", include = "LA", color = "black", data = louisiana_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# arizona
plot_usmap("counties", include = "AZ", color = "black", data = arizona_medincome, values = "estimate") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# incarceration rate maps
# colorado
plot_usmap("counties", include = "CO", color = "black", data = colorado_incarcerations, values = "percent_incarcerated_20") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# louisiana
plot_usmap("counties", include = "LA", color = "black", data = louisiana_incarcerations, values = "percent_incarcerated_20") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
# arizona
plot_usmap("counties", include = "AZ", color = "black", data = arizona_incarcerations, values = "percent_incarcerated_20") +
labs(title = "Title",
caption = "Source: U.S. Census Bureau") +
scale_fill_binned(type = "viridis", name = "Legend", label = scales::comma) +
theme(legend.position = "right", text=element_text(family="Palatino"))
View(arizona_incarcerations)
0.000001 > 0
0 > 0.000001
states <- get_acs(geography = "state",
output = 'wide',
year = 2020,
variables = censusvariables) %>%
select(GEOID, NAME, populationE, us_bornE, foreign_bornE, whiteE, blackE, asianE, ai_anE, nh_piE, hisp_latinoE,
otherE, two_or_moreE, median_ageE, median_hh_incomeE, housing_unitsE, ho_occupiedE, renter_occupiedE)
library(tidyverse)
install.packages("tidyverse")
install.packages("tidycensus")
install.packages("dplyr")
install.packages("purrr")
library(tidyverse)
library(tidycensus)
library(dplyr)
library(purrr)
options(tigris_use_cache = TRUE)
census_api_key("8b69f2765f65670c2183febdffce6afc73c72101", install=TRUE, overwrite=TRUE)
readRenviron("~/.Renviron")
acs_dp_variables <- load_variables(2020, dataset = "acs5/profile", cache = TRUE)
View(acs_dp_variables)
censusvariables = c(population = "DP05_0001",
us_born = "DP02_0090",
foreign_born = "DP02_0094"
white = "DP05_0077",
censusvariables = c(population = "DP05_0001",
us_born = "DP02_0090",
foreign_born = "DP02_0094",
white = "DP05_0077",
black = "DP05_0078",
asian = "DP05_0080",
ai_an = "DP05_0079",
nh_pi = "DP05_0081",
hisp_latino = "DP05_0071",
other = "DP05_0082",
two_or_more = "DP05_0083",
median_age = "DP05_0018",
median_hh_income = "DP03_0062",
housing_units = "DP04_0001",
ho_occupied = "DP04_0080",
renter_occupied = "DP04_0047")
zctas <- get_acs(geography = "zcta",
output = 'wide',
year = 2020,
variables = censusvariables) %>%
select(GEOID, NAME, populationE, us_bornE, foreign_bornE, whiteE, blackE, asianE, ai_anE, nh_piE, hisp_latinoE,
otherE, two_or_moreE, median_ageE, median_hh_incomeE, housing_unitsE, ho_occupiedE, renter_occupiedE)
counties <- get_acs(geography = "county",
output = 'wide',
year = 2020,
variables = censusvariables) %>%
select(GEOID, NAME, populationE, us_bornE, foreign_bornE, whiteE, blackE, asianE, ai_anE, nh_piE, hisp_latinoE,
otherE, two_or_moreE, median_ageE, median_hh_incomeE, housing_unitsE, ho_occupiedE, renter_occupiedE)
states <- get_acs(geography = "state",
output = 'wide',
year = 2020,
variables = censusvariables) %>%
select(GEOID, NAME, populationE, us_bornE, foreign_bornE, whiteE, blackE, asianE, ai_anE, nh_piE, hisp_latinoE,
otherE, two_or_moreE, median_ageE, median_hh_incomeE, housing_unitsE, ho_occupiedE, renter_occupiedE)
View(counties)
View(states)
View(counties)
View(zctas)
View(counties)
View(counties)
gsub("(.*),.*", "\\1", counties$NAME)
View(counties)
counties <- gsub("(.*),.*", "\\1", counties$NAME)
counties <- get_acs(geography = "county",
output = 'wide',
year = 2020,
variables = censusvariables) %>%
select(GEOID, NAME, populationE, us_bornE, foreign_bornE, whiteE, blackE, asianE, ai_anE, nh_piE, hisp_latinoE,
otherE, two_or_moreE, median_ageE, median_hh_incomeE, housing_unitsE, ho_occupiedE, renter_occupiedE)
View(counties)
counties$NAME <- gsub("(.*),.*", "\\1", counties$NAME)
View(counties)
setwd("~/Documents/GitHub/final-project-amandavhernan")
known_sites_zctas <- read_csv("data/known_sites.csv")
known_sites_counties <- read_csv("data/known_sites.csv")
known_sites_states <- read_csv("data/known_sites.csv")
View(known_sites_zctas)
View(counties)
View(zctas)
known_sites_zctas_w_pop <- known_sites_zctas %>%
left_join(zctas, by=c('zip'='GEOID'))
known_sites_zctas$zip <- as.character(known_sites_zctas$zip)
known_sites_zctas_w_pop <- known_sites_zctas %>%
left_join(zctas, by=c('zip'='GEOID'))
View(known_sites_zctas_w_pop)
View(counties)
View(known_sites_counties)
View(states)
View(known_sites_states)
known_sites_counties_w_pop <- known_sites_counties %>%
left_join(counties, by=c('county'='NAME'))
known_sites_states_w_pop <- known_sites_states %>%
left_join(states, by=c('state'='NAME'))
View(known_sites_states_w_pop)
View(known_sites_counties_w_pop)
View(known_sites_states_w_pop)
View(known_sites_zctas_w_pop)
known_sites <- read_csv("data/known_sites.csv")
known_sites$zip <- as.character(known_sites$zip) # change zip into a character
known_sites <- known_sites %>%
mutate(state = replace(state,state == "Arizona", "Arizo")) # fix Arizona typo
View(known_sites)
known_sites <- known_sites %>%
mutate(known_sites$state = replace(known_sites$state,known_sites$state == "Arizona", "Arizo")) # fix Arizona typo
known_sites <- known_sites %>%
mutate(state = replace(state,state == "Arizona", "Arizo")) # fix Arizona typo
View(known_sites)
known_sites <- replace(known_sites$state, known_sites$state=="Arizo", "Arizona")
install.packages("stringr")
install.packages("stringr")
library(stringr)
library(tidyverse)
library(tidycensus)
library(dplyr)
library(purrr)
library(stringr)
known_sites <- known_sites %>%
mutate(across('state', str_replace, 'Arizo', 'Arizona'))
known_sites <- read_csv("data/known_sites.csv")
known_sites$zip <- as.character(known_sites$zip) # change zip into a character
known_sites <- known_sites %>%
mutate(across('state', str_replace, 'Arizo', 'Arizona'))
View(known_sites)
known_sites <- known_sites %>%
mutate(across('state', str_replace, 'India', 'Indiana')) # indiana  typo
known_sites <- known_sites %>%
mutate(across('state', str_replace, 'w', 'Minnesota')) # minnesota  typo
View(known_sites)
known_sites <- read_csv("data/known_sites.csv")
View(known_sites)
known_sites$zip <- as.character(known_sites$zip) # change zip into a character for joining purposes
known_sites$zip <- as.character(known_sites$zip) # change zip into a character for joining purposes
known_sites <- known_sites %>%
mutate(across('state', str_replace, 'Arizo', 'Arizona')) # arizona typo
known_sites <- known_sites %>%
mutate(across('state', str_replace, 'India', 'Indiana')) # indiana  typo
View(known_sites)
setwd("~/Documents/GitHub/final-project-amandavhernan/data")
setwd("~/Documents/GitHub/final-project-amandavhernan")
write.csv(known_sites, "data/known_sites_clean.csv", row.names=FALSE)
known_sites_zctas <- read_csv("data/known_sites_clean.csv")
known_sites_counties <- read_csv("data/known_sites_clean.csv")
known_sites_states <- read_csv("data/known_sites_clean.csv")
known_sites_zctas_w_pop <- known_sites_zctas %>%
left_join(zctas, by=c('zip'='GEOID'))
known_sites <- read_csv("data/known_sites.csv")
# cleaning
known_sites$zip <- as.character(known_sites$zip) # change zip into a character for joining purposes
known_sites <- known_sites %>%
mutate(across('state', str_replace, 'Arizo', 'Arizona')) # arizona typo
known_sites <- known_sites %>%
mutate(across('state', str_replace, 'India', 'Indiana')) # indiana  typo
write.csv(known_sites, "data/known_sites_clean.csv", row.names=FALSE)
# make zip, county and state dfs
known_sites_zctas <- read_csv("data/known_sites_clean.csv")
known_sites_counties <- read_csv("data/known_sites_clean.csv")
known_sites_states <- read_csv("data/known_sites_clean.csv")
known_sites_zctas_w_pop <- known_sites_zctas %>%
left_join(zctas, by=c('zip'='GEOID'))
known_sites <- read_csv("data/known_sites.csv")
# cleaning
known_sites <- known_sites %>%
mutate(across('state', str_replace, 'Arizo', 'Arizona')) # arizona typo
known_sites <- known_sites %>%
mutate(across('state', str_replace, 'India', 'Indiana')) # indiana  typo
# export cleaned dataset
write.csv(known_sites, "data/known_sites_clean.csv", row.names=FALSE)
known_sites_zctas <- read_csv("data/known_sites_clean.csv")
known_sites_zctas$zip <- as.character(known_sites$zip) # change zip into a character for joining purposes
known_sites_counties <- read_csv("data/known_sites_clean.csv")
known_sites_states <- read_csv("data/known_sites_clean.csv")
known_sites_zctas_w_pop <- known_sites_zctas %>%
left_join(zctas, by=c('zip'='GEOID'))
known_sites_counties_w_pop <- known_sites_counties %>%
left_join(counties, by=c('county'='NAME'))
known_sites_states_w_pop <- known_sites_states %>%
left_join(states, by=c('state'='NAME'))
View(known_sites_counties_w_pop)
View(counties)
write.csv(known_sites_zctas_w_pop, "data/census/known_sites_zctas_w_pop.csv", row.names=FALSE)
write.csv(known_sites_counties_w_pop, "data/census/known_sites_counties_w_pop.csv", row.names=FALSE)
write.csv(known_sites_states_w_pop, "data/census/known_sites_states_w_pop.csv", row.names=FALSE)
View(known_sites)
